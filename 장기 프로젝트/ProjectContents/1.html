<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/projectsstyle.css">
    <script src="../script/projectscript.js"></script>
    <title>HYUNJUN's PLAYGROUND - Project 1</title>
</head>

<body>
    <header class="navbar">
        <div class="navbar_logo">
            <a href="Index.html">
                <i class="fa-solid fa-meteor"></i>
                HARRY-GO-ROUND
            </a>
        </div>
        <ul class="navbar_menu">
            <li><a href="./Index.html">Home</a></li>
            <li><a href="./Projects.html">Projects</a></li>
            <li><a href="./Story.html">Story</a></li>
            <li><a href="./About.html">About</a></li>
            <li><a href="./Contacts.html">Contacts</a></li>
        </ul>
    </header>
    <nav>
        <div><h1 onclick="accordion('lists', 'pr1')">Projects</h1>
            <ul id="lists">
                <li id="pr1"><a href="./1.html">Project 1</a></li>
                <li id="pr2"><a href="">Project 2</a></li>
                <li id="pr3"><a href="">Project 3</a></li>
                <li id="pr4"><a href="">Project 4</a></li>
                <li id="pr5"><a href="">Project 5</a></li>
            </ul>
        </div>
    </nav>
    <section>
        <h2>Game만들기</h2>
        <div id="content">
            <div class="githublink">
                <embed src="" type="">
            </div>
            <p>
                이 프로젝트는 모바일소프트웨어 과목에서 진행했던 Lab과제중 하나이다. <br>
                우선 이 프로젝트의 Objectives를 살펴보자.
            </p>
            <div id="problem">
                <p>
                    JAVA의 상속 및 다형성을 사용하여 게임을 제작하려 한다. 이 때 게임의 캐릭터는 다음과 같이 구성되며 공격 시 상대방에게 입힐 수 있는 데미지는 다음과 같이 계산된다.
                    게임이 시작되고 인스턴스가 형성되면 모든 캐릭터의 최대 체력량은 최대 체력값을 가지도록 하며, 공격을 받으면 체력량을 상대방이 주는 Damage만큼 소모하게 된다. 또한 주어진
                    체력을 다
                    소모할 경우에 캐릭터는 게임에서 패배하는 것으로 간주한다.
                <table border="1">
                    <thead>
                        <tr>
                            <th>게임 캐릭터</th>
                            <th>Damage</th>
                            <th>최대 체력</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Human</td>
                            <td>50</td>
                            <td>200</td>
                        </tr>
                        <tr>
                            <td>Cyber Daemon</td>
                            <td>40, 30% 확률로 60</td>
                            <td>250</td>
                        </tr>
                        <tr>
                            <td>Barlog</td>
                            <td>25씩 두 번 공격, 각 공격마다 20% 확률로 35</td>
                            <td>170</td>
                        </tr>
                        <tr>
                            <td>Elf</td>
                            <td>35, 30% 확률로 70</td>
                            <td>180</td>
                        </tr>
                    </tbody>
                </table>
                또한 물약을 먹으면 체력이 회복되는 데 사용할 수 있는 물약의 수는 모두 5개로 제한되며 회복량은 다음과 같다. 또한 회복후의 체력은 물약의 투입 횟수에 관계없이 최대 체력 수치를 초과할
                수
                없다
                <table border="1">
                    <thead>
                        <tr>
                            <th>게임 캐릭터</th>
                            <th>Heal</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Human</td>
                            <td>40</td>
                        </tr>
                        <tr>
                            <td>Cyber Daemon</td>
                            <td>30, 30% 확률로 50 회복</td>
                        </tr>
                        <tr>
                            <td>Barlog</td>
                            <td>30, 하지만 한 번에 물약을 두 병 먹을 수 있다.</td>
                        </tr>
                        <tr>
                            <td>Elf</td>
                            <td>30, 25%의 확률로 60 회복</td>
                        </tr>
                    </tbody>
                </table>
                이들 캐릭터는 Character 클래스를 상속하며 Character 클래스는 다음과 같은 메소드를 가진다. 이 때 Character 클래스는 추상클래스로 구현하도록 하며 Character
                클래스를 상속하는 클래스의 메소드 일부는 오버라이드하며 일부 메소드는 상속하도록 한다.
                <ul>
                    <li>int hitPoint; // 캐릭터의 체력.</li>
                    <li>int portionNumber; // 가지고 있는 물약의 수를 나타낸다.</li>
                    <li>void initialize(); // 체력과 물약의 수를 최대치로 초기화한다.</li>
                    <li>void attack(Character c); // 캐릭터 c에게 데미지를 준다. 데미지의 숫자는 주어진 특성에 맞도록 주며 확률이 필요한 경우 랜덤함수를 사용하여 확률별로
                        데미지를 주도록 한다.</li>
                    <li>int getDamage(int damage); // 특정 숫자의 데미지량을 받아 자신의 체력에 반영하며 필요하다면 recover() 메소드를 통해 물약을 먹고 체력을
                        회복하도록
                        한다. </li>
                    <li>void recover(); // 물약을 먹고 체력을 캐릭터 특성에 따라 회복한다. Barlog의 경우 필요하다면 한번에 2번 물약을 먹을 수 있다.</li>
                    <li>boolean isDie(); // 자신이 죽었는 지 아닌지를 판단한다. 죽은 경우 “<___> is dead.” 메시지를 출력한다.</li>
                    <li>boolean needPortion(); // 지금 물약을 먹어야 하는 지를 판단하고 남은 물약이 있다면 물약을 소비한다.</li>
                    <li>void whoAmI(); // 자신이 어떤 클래스에 속하는 지를 화면에 출력한다.</li>
                </ul>
                여기서 main() 메소드를 담고 있어야 하는 클래스가 필요한 데 이 클래스를 Game이라고 하고 격투를 구현하는 메소드를 다음과 같이 구현한다. <br>
                Character battle(Character blue, Character red); // 두 character 인스턴스를 매개변수로 받아 이 중 승자 인스턴스를 리턴한다. Battle
                방식은
                두 character 인스턴스가 번갈아 가며 공격을 하며 한 인스턴스의 체력이 0이하가 되면 Battle을 멈추고 체력이 높은 character를 리턴한다. 이 때 blue가 먼저 선공을
                하는
                것으로 하며 어떤 character를 blue에 놓을 것인가 하는 문제는 프로그램상에서 임의로 선택하도록 한다. 또한 blue, red는 모두 전투 실행 전의 체력과 물약은 최대치를
                가지고 있는
                것으로 한다. 단 battle시에는 다음과 같은 메시지를 화면에 계속 출력하여야 한다. <br>
                <br>
                <br>
                Human attacks with damage 50. Elf has 70 hit point now. <br>
                Elf attacks with damage 35. Human has 55 hit point now. <br>
                Human eats portion and 95 hit point now. <br>
                <br>
                <br>
                void tournament(Character hu, Character cyber, Character bar, Character el); // 4개의 Character의 인스턴스(각
                인스턴스들은
                서로 다른 캐릭터 타입이어야 함)들을 매개변수로 받으며 이들을 토너먼트로 경기를 시켜 우승자의 whoAmI() 메소드를 통해 우승자의 메시지를 출력하도록 한다. 토너먼트로 경기를 한다는
                의미는
                1:1로 2경기를 하고 그 승자간에 결승전을 가지도록 하여 결승전 승자가 우승을 한다는 것을 말한다.
                </p>
            </div>
            <div id="solution">
                <p>
                    이 문제를 풀기 위해서는, JAVA의 다형성과 상속 및 추상적 메소드들을 사용하여야 한다.
                    일단 전체적인 캐릭터의 기본 특성을 활성화 시켜줄 수 있는 Character.java를 생성하여 Character 클래스를 만들어 준다.
                    이 때 가장 중요한 것이 이 클래스를 abstract로 만들어 다른 클래스들에서 override할 수 있어야 한다는 것이다.
                    <span>Character.java</span>
                    <code class="Character">
                        <pre>
                            package game;

                            import java.util.*;

                            public abstract class Character {
                                int hitPoint;
                                int portionNumber;
                                int maxHP;
                                String species;

                                public Character() {
                                    initialize();
                                }

                                void initialize() {
                                    this.portionNumber = 5;
                                    this.hitPoint = maxHP;
                                }

                                public abstract void attack(Character c);

                                int getDamage(int damage) {
                                    hitPoint -= damage;
                                    if(!isDie()){
                                        System.out.println(species+" has "+hitPoint+" hit point now.");
                                        if(species.equals("Barlog")){
                                            if(needPortion())recover();
                                            if(needPortion())recover();
                                        }
                                        else{
                                            if(needPortion())recover();
                                        }
                                    }
                                    else{
                                        hitPoint=0;
                                    }
                                    return hitPoint;
                                }

                                public abstract void recover();

                                public boolean isDie() {
                                    if (hitPoint <= 0) {
                                        System.out.println(species+" is dead.");
                                        return true;
                                    } else {
                                        return false;
                                    }
                                }

                                boolean needPortion() {
                                    if (portionNumber != 0 && hitPoint < maxHP) {
                                        System.out.print("Do you want to take a portion? [y/n]");
                                        Scanner in = new Scanner(System.in);
                                        String x = in.nextLine();
                                        if (x.equals("y")) {
                                            return true;
                                        } else {
                                            return false;
                                        }
                                    } else {
                                        if (portionNumber == 0) {
                                            System.out.println("No Portion Left!");
                                        }
                                        return false;
                                    }
                                }

                                void whoAmI(){
                                    System.out.println("This is a(n) "+species+" Character.");
                                }

                            }
                        </pre>
                    </code>
                    조건에 주어진 모든 요소들이 들어가고 추가로 maxHP와 species 변수를 추가하여 각 종족마다 다른 값을 가지도록 하였다.
                </p>
                <p>
                    다음은 각 종족에 맞게 클래스를 생성해 주고, 그에 대한 데미지와 힐 조건을 만족하도록 하여야 한다. 확률이 있는 경우는 Random 인스턴스를 생성하여 0부터 99까지의 값을
                    현재 시간을 시드값으로 하여 매번 다르게 나오도록 하였다.
                    그리고 그 수가 예를 들어 30%의 확률이면 r&lt;30이런 식으로 하여 if문 안에 넣어 값을 조정하도록 하였다.
                    <span>Human.java</span>
                    <code class="Human">
                        <pre>
                            package game;

                            public class Human extends Character {
                                private int dmg;
                                private int heal;

                                public Human() {
                                    this.hitPoint = 200;
                                    this.dmg = 50;
                                    this.heal = 40;
                                    this.maxHP = 200;
                                    this.species = "Human";
                                }

                                public void attack(Character c) {
                                    if (!isDie()) {
                                        System.out.print(species + " attacks with damage " + dmg + ".");
                                        c.hitPoint = c.getDamage(dmg);
                                    }
                                }

                                public void recover() {
                                    hitPoint += heal;
                                    portionNumber -= 1;
                                    System.out.println(species + " took portion of " + heal + ", " + portionNumber + " portion(s) and " + hitPoint
                                            + " hit point left.");
                                }
                            }
                        </pre>
                    </code>
                    <span>CyberDaemon.java</span>
                    <code class="CyberDaemon">
                        <pre>
                            package game;

                            import java.util.*;

                            public class CyberDaemon extends Character {
                                private int dmg;
                                private int heal;

                                public CyberDaemon() {
                                    this.hitPoint = 250;
                                    this.dmg = 40;
                                    this.heal = 30;
                                    this.maxHP = 250;
                                    this.species = "CyberDaemon";
                                }

                                public void attack(Character c) {
                                    if(!isDie()){
                                        Random rnd = new Random();
                                        rnd.setSeed(System.currentTimeMillis());
                                        int random = rnd.nextInt(100);
                                        if (random < 30) {
                                            dmg = 60;
                                        } else {
                                            dmg = 40;
                                        }
                                        System.out.print(species + " attacks with damage " + dmg + ".");
                                        c.hitPoint = c.getDamage(dmg);
                                    }
                                }

                                public void recover() {
                                    Random rnd = new Random();
                                    rnd.setSeed(System.currentTimeMillis());
                                    int random = rnd.nextInt(100);
                                    if (random < 30) {
                                        heal = 50;
                                    } else {
                                        heal = 30;
                                    }
                                    hitPoint += heal;
                                    portionNumber -= 1;
                                    System.out.println(species + " took portion of " + heal + ", " + portionNumber + " portion(s) and " + hitPoint
                                            + " hit point left.");
                                }
                            }
                        </pre>
                    </code>
                    <span>Barlog.java</span>
                    <code class="Barlog">
                        <pre>
                            package game;

                            import java.util.*;

                            public class Barlog extends Character {
                                private int dmg;
                                private int heal;

                                public Barlog() {
                                    this.hitPoint = 170;
                                    this.dmg = 25;
                                    this.heal = 30;
                                    this.maxHP = 170;
                                    this.species = "Barlog";
                                }

                                public void attack(Character c) {
                                    if(!isDie()){
                                        for (int i = 0; i < 2; i++) {
                                            Random rnd = new Random();
                                            rnd.setSeed(System.currentTimeMillis());
                                            int random = rnd.nextInt(100);
                                            if (random < 20) {
                                                dmg = 35;
                                            } else {
                                                dmg = 25;
                                            }
                                            System.out.print(species + " attacks with damage " + dmg + ".");
                                            c.hitPoint = c.getDamage(dmg);
                                        }
                                    }
                                }

                                public void recover() {
                                    hitPoint += heal;
                                    portionNumber -= 1;
                                    System.out.println(species + " took portion of " + heal + ", " + portionNumber + " portion(s) and " + hitPoint
                                            + " hit point left.");
                                }
                            }
                        </pre>
                    </code>
                    <span>Elf.java</span>
                    <code class="Elf">
                        <pre>
                            package game;

                            import java.util.*;

                            public class Elf extends Character {
                                private int dmg;
                                private int heal;

                                public Elf() {
                                    this.hitPoint = 180;
                                    this.dmg = 35;
                                    this.heal = 30;
                                    this.maxHP = 180;
                                    this.species = "Elf";
                                }

                                public void attack(Character c) {
                                    if (!isDie()) {
                                        Random rnd = new Random();
                                        rnd.setSeed(System.currentTimeMillis());
                                        int random = rnd.nextInt(100);
                                        if (random < 30) {
                                            dmg = 70;
                                        } else {
                                            dmg = 35;
                                        }
                                        System.out.print(species + " attacks with damage " + dmg + ".");
                                        c.hitPoint = c.getDamage(dmg);
                                    }
                                }

                                public void recover() {
                                    Random rnd = new Random();
                                    rnd.setSeed(System.currentTimeMillis());
                                    int random = rnd.nextInt(100);
                                    if (random < 30) {
                                        heal = 50;
                                    } else {
                                        heal = 30;
                                    }
                                    hitPoint += heal;
                                    portionNumber -= 1;
                                    System.out.println(species + " took portion of " + heal + ", " + portionNumber + " portion(s) and " + hitPoint
                                            + " hit point left.");
                                }
                            }
                        </pre>
                    </code>
                </p>
                <p>
                    마지막으로 메인 메소드가 들어있는 Game.java이다. 여기에는 결투를 진행하는 battle 메소드와, 토너먼트를 하는 tournament 메소드가 있다.
                    토너먼트 메소드에서는 랜덤 수로 누가 블루 진영에 들어갈지, 레드 진영에 들어갈 지, 혹은 어떤 종족끼리 붙을지를 Random 인스턴스를 통해 정하였다.
                    0~3 사이의 난수를 생성하여 이를 배열에 넣은 후, Character 인스턴스들을 Character 배열에 순서대로 넣은 후, 각 난수를 Character 배열의 인덱스로서
                    활용하였다.
                    배틀 메소드의 경우 무조건 블루가 선공, 레드가 후공으로 하라고 조건이 주어졌으므로 그렇게 적용하였다.
                    <span>Game.java</span>
                    <code class="Game">
                        <pre>
                            package game;

                            import java.util.Random;

                            public class Game {
                                static Character battle(Character blue, Character red){
                                    Character win;
                                    System.out.println(blue.species+" vs "+red.species);
                                    while(true){
                                        if(red.isDie() || blue.isDie()){
                                            break;
                                        }
                                        blue.attack(red);
                                        red.attack(blue);
                                    }
                                    win = (red.hitPoint > blue.hitPoint)? red: blue;
                                    System.out.println("The winner between "+blue.species+" and "+red.species+" is "+win.species);
                                    win.initialize();
                                    return win;
                                }

                                static void tournament(Character hu, Character cyber, Character bar, Character el){
                                    //semi-finals
                                    Random r = new Random();
                                    r.setSeed(System.currentTimeMillis());
                                    int[] blue = new int[4];
                                    Character[] semi = {hu, cyber, bar, el};
                                    for(int i = 0; i<4; i++){
                                        blue[i]=r.nextInt(4);
                                        for(int j=0;j<i;j++){
                                            if(blue[i]==blue[j]) i--;
                                        }
                                    }
                                    Character winner = battle(battle(semi[blue[0]],semi[blue[1]]), battle(semi[blue[2]], semi[blue[3]]));
                                    winner.whoAmI();
                                }

                                public static void main(String[] args) throws Exception {
                                    Character human = new Human();
                                    Character cyberDaemon = new CyberDaemon();
                                    Character barlog = new Barlog();
                                    Character elf = new Elf();
                                    tournament(human, cyberDaemon, barlog, elf);   
                                }
                            }
                        </pre>
                    </code>
                </p>
            </div>
        </div>
    </section>
    <footer class="footer">
        <div>
            Copyright&copy;2022 All rights reserved by Hyunjun Yim
        </div>
    </footer>
</body>

</html>